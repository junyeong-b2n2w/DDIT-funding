<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Funding-Mapper">

	<select id="selectFundingByFno" parameterType="int" resultType="funding">
		select 
		* 
		from f_funding
		where fno=#{fno}
	</select>
	
	<select id="selectFundingList" resultType="funding">
		select
		* 
		from f_funding
		where fno is not null
		order by regdate desc 
	</select>
	
	<select id="selectFundingSequenceNextValue" resultType="int">
		select funding_seq.nextVal
		from dual
	</select>
	
	
	<update id="insertFunding" parameterType="funding">
		update f_funding set 
		writer = #{writer},title = #{title},content = #{content},price_goal=#{price_goal},startdate=#{startdate},enddate=#{enddate},fstatus='no_accept',creater=#{creater},furl=#{furl},tag=#{tag},regdate=sysdate,category=#{category},project_img=#{project_img}
		where fno = #{fno}
	</update>
	
	<update id="insertEmptyFunding" parameterType="int">
		insert into
		f_funding(fno)
		values(#{fno})
	</update>
	
	<update id="updateFunding" parameterType="funding">
		update f_funding 
		set 
		title = #{title},content = #{content}
		where fno=#{fno}
	</update>
	
	<update id="deleteFunding" parameterType="int" >
		delete 
		from f_funding 
		where fno=#{fno}		
	</update>

</mapper>